1 why i got TypeError: todos.map is not a function, even though , setTodos(...todos, text);
Here is exactly why you still got the error:

âŒ Mistake:

You wrote:

setTodos(...todos, text);


This is WRONG syntax.

â— This creates NOTHING like an array.

React receives something like:

setTodos("pray", "study", "eat")


So todos is no longer an array, and .map() fails.

Thatâ€™s why you get:

TypeError: todos.map is not a function

âœ… Correct syntax:
setTodos([...todos, text]);

What this means:

[ ...todos ] â†’ creates a new array

[ ...todos, text ] â†’ adds the new item at the end

React re-renders correctly

ğŸ§  Remember the rule:
âœ” .map() ONLY works on arrays
âœ” ...todos must be inside [] brackets
âŒ Never write: setTodos(...todos)
âŒ Never forget the []
âœ… Here is the correct Todo App structure:
import { useState } from "react";

export default function TodoApp() {
  const [text, setText] = useState("");
  const [todos, setTodos] = useState([]);

  function addTodo() {
    setTodos([...todos, text]);
    setText("");
  }

  return (
    <>
      <input 
        value={text}
        onChange={(e) => setText(e.target.value)}
      />
      <button onClick={addTodo}>Add Todo</button>

      <ul>
        {todos.map((todo, index) => (
          <li key={index}>{todo}</li>
        ))}
      </ul>
    </>
  );
}

âœ¨ Checklist (must be true)
Thing	Must Be
todos	an array ([])
text	a string ("")
setTodos([...todos, text])	correct
setTodos(...todos, text)	âŒ wrong


2 {
                    todos.map((todo, index) => (
                        <li key={index}>
                            {todo}
                            <button onClick={() => deleteTodo(todo.id)}>delete</button>
                            <button>edit</button>
                        </li>
                        ))                              
                }
                delet deletes all todos, b/c 
                <button onClick={() => deleteTodo(todo.id)}>delete</button>
But in your .map, each todo seems to be a string (because you do {todo} directly).
 Strings donâ€™t have an id property, so todo.id is undefined.

 3 

npm WARN EBADENGINE Unsupported engine
You are using Node.js 18.19.1. Vite requires Node.js version 20.19+ or 22.12+
TypeError: crypto.hash is not a function

âœ… Your issue is 100% caused by old Node.js (v18.19.1)

Vite requires Node 20.19+ or 22.12+, but you are using Node 18.
Thatâ€™s why you see:


Vite will NOT run on Node 18.

âœ… âœ” FIX: Upgrade Node.js to Node 22 LTS

Since you are on Ubuntu (WSL), here is the correct way:

ğŸ”§ STEP 1 â€” Remove old Node

(Only removes the old version, not your projects)

sudo apt remove nodejs

ğŸ”§ STEP 2 â€” Install Node Version Manager (NVM)

NVM lets you switch Node versions easily.

Run:

curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash


Then restart terminal:

exit


Open terminal again and verify:

command -v nvm


If it prints nvm, good.

ğŸ”§ STEP 3 â€” Install Node 22 (recommended)
nvm install 22
nvm use 22


Make it default:

nvm alias default 22


Check version:

node -v


It should show:

v22.x.x

ğŸ”§ STEP 4 â€” Re-run your Vite React app

Go to your project:

cd /home/alhemdulillah/projects/frontend_devop_2/react/react


Then install dependencies again (because old ones used Node 18):

rm -rf node_modules
npm install


Then run:

npm run dev

ğŸ‰ After upgrading Node â†’ Vite will work 100% without errors
If you want, I can:

âœ… check your Node version
âœ… fix your Vite setup
âœ… create a clean React project for you

4

Your problem is NOT with localStorage.
â— Your problem is that you declared todos AFTER using it â†’ so React crashes.
âŒ You used todos before it was defined

Look at your code order: b/c of it nothing is displayed
React must read todos before you use it.

But in your file, React reaches AddTodoList() and deleteTodo() and toggleCompleted()â€¦
and inside them you use todos, but React hasn't created todos state yet.

So React crashes â†’ blank screen â†’ error boundary message.
