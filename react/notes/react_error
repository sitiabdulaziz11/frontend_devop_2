1 why i got TypeError: todos.map is not a function, even though , setTodos(...todos, text);
Here is exactly why you still got the error:

‚ùå Mistake:

You wrote:

setTodos(...todos, text);


This is WRONG syntax.

‚ùó This creates NOTHING like an array.

React receives something like:

setTodos("pray", "study", "eat")


So todos is no longer an array, and .map() fails.

That‚Äôs why you get:

TypeError: todos.map is not a function

‚úÖ Correct syntax:
setTodos([...todos, text]);

What this means:

[ ...todos ] ‚Üí creates a new array

[ ...todos, text ] ‚Üí adds the new item at the end

React re-renders correctly

üß† Remember the rule:
‚úî .map() ONLY works on arrays
‚úî ...todos must be inside [] brackets
‚ùå Never write: setTodos(...todos)
‚ùå Never forget the []
‚úÖ Here is the correct Todo App structure:
import { useState } from "react";

export default function TodoApp() {
  const [text, setText] = useState("");
  const [todos, setTodos] = useState([]);

  function addTodo() {
    setTodos([...todos, text]);
    setText("");
  }

  return (
    <>
      <input 
        value={text}
        onChange={(e) => setText(e.target.value)}
      />
      <button onClick={addTodo}>Add Todo</button>

      <ul>
        {todos.map((todo, index) => (
          <li key={index}>{todo}</li>
        ))}
      </ul>
    </>
  );
}

‚ú® Checklist (must be true)
Thing	Must Be
todos	an array ([])
text	a string ("")
setTodos([...todos, text])	correct
setTodos(...todos, text)	‚ùå wrong


2 {
                    todos.map((todo, index) => (
                        <li key={index}>
                            {todo}
                            <button onClick={() => deleteTodo(todo.id)}>delete</button>
                            <button>edit</button>
                        </li>
                        ))                              
                }
                delet deletes all todos, b/c 
                <button onClick={() => deleteTodo(todo.id)}>delete</button>
But in your .map, each todo seems to be a string (because you do {todo} directly).
 Strings don‚Äôt have an id property, so todo.id is undefined.

 3 

npm WARN EBADENGINE Unsupported engine
You are using Node.js 18.19.1. Vite requires Node.js version 20.19+ or 22.12+
TypeError: crypto.hash is not a function

‚úÖ Your issue is 100% caused by old Node.js (v18.19.1)

Vite requires Node 20.19+ or 22.12+, but you are using Node 18.
That‚Äôs why you see:


Vite will NOT run on Node 18.

‚úÖ ‚úî FIX: Upgrade Node.js to Node 22 LTS

Since you are on Ubuntu (WSL), here is the correct way:

üîß STEP 1 ‚Äî Remove old Node

(Only removes the old version, not your projects)

sudo apt remove nodejs

üîß STEP 2 ‚Äî Install Node Version Manager (NVM)

NVM lets you switch Node versions easily.

Run:

curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash


Then restart terminal:

exit


Open terminal again and verify:

command -v nvm


If it prints nvm, good.

üîß STEP 3 ‚Äî Install Node 22 (recommended)
nvm install 22
nvm use 22


Make it default:

nvm alias default 22


Check version:

node -v


It should show:

v22.x.x

üîß STEP 4 ‚Äî Re-run your Vite React app

Go to your project:

cd /home/alhemdulillah/projects/frontend_devop_2/react/react


Then install dependencies again (because old ones used Node 18):

rm -rf node_modules
npm install


Then run:

npm run dev

üéâ After upgrading Node ‚Üí Vite will work 100% without errors
If you want, I can:

‚úÖ check your Node version
‚úÖ fix your Vite setup
‚úÖ create a clean React project for you

4

Your problem is NOT with localStorage.
‚ùó Your problem is that you declared todos AFTER using it ‚Üí so React crashes.
‚ùå You used todos before it was defined

Look at your code order: b/c of it nothing is displayed
React must read todos before you use it.

But in your file, React reaches AddTodoList() and deleteTodo() and toggleCompleted()‚Ä¶
and inside them you use todos, but React hasn't created todos state yet.

So React crashes ‚Üí blank screen ‚Üí error boundary message.

5

i got M [vite] Internal server error: /home/alhemdulillah/projects/frontend_devop_2/react/src/TodoApp.jsx: 'return' outside of function. (106:4)

  104 |    
  105 |
> 106 |     return (
      |     ^
  107 |         <>
  108 |             <input value={text}
  109 |             onChange={(e) => setText(e.target.value)}
  Plugin: vite:react-babel
  File: /home/alhemdulillah/projects/frontend_devop_2/react/src/TodoApp.jsx:106:4

  b/c i closed the main app component some where before completed.

  